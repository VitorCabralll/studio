"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[482],{285:(e,r,a)=>{a.d(r,{$:()=>c});var o=a(5155),t=a(4253),s=a(2085),i=a(2115),n=a(9434);let l=(0,s.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"size-10"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef((e,r)=>{let{className:a,variant:s,size:i,asChild:c=!1,...u}=e,d=c?t.DX:"button";return(0,o.jsx)(d,{className:(0,n.cn)(l({variant:s,size:i,className:a})),ref:r,...u})});c.displayName="Button"},2523:(e,r,a)=>{a.d(r,{p:()=>i});var o=a(5155),t=a(2115),s=a(9434);let i=t.forwardRef((e,r)=>{let{className:a,type:t,...i}=e;return(0,o.jsx)("input",{type:t,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:r,...i})});i.displayName="Input"},5057:(e,r,a)=>{a.d(r,{J:()=>c});var o=a(5155),t=a(968),s=a(2085),i=a(2115),n=a(9434);let l=(0,s.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=i.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,o.jsx)(t.b,{ref:r,className:(0,n.cn)(l(),a),...s})});c.displayName=t.b.displayName},6104:(e,r,a)=>{a.d(r,{G:()=>n,x:()=>l});var o=a(6864),t=a(3915),s=a(9509);let i={apiKey:s.env.NEXT_PUBLIC_FIREBASE_API_KEY||"your-api-key",authDomain:s.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"your-auth-domain",projectId:s.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"your-project-id",storageBucket:s.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET||"your-storage-bucket",messagingSenderId:s.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||"your-messaging-sender-id",appId:s.env.NEXT_PUBLIC_FIREBASE_APP_ID||"your-app-id"},n="your-api-key"!==i.apiKey,l=(0,t.Dk)().length?(0,t.Sx)():(0,t.Wp)(i);n&&(0,o.P5)(l)},6695:(e,r,a)=>{a.d(r,{BT:()=>c,Wu:()=>u,ZB:()=>l,Zp:()=>i,aR:()=>n,wL:()=>d});var o=a(5155),t=a(2115),s=a(9434);let i=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,o.jsx)("div",{ref:r,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...t})});i.displayName="Card";let n=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,o.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",a),...t})});n.displayName="CardHeader";let l=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,o.jsx)("h3",{ref:r,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",a),...t})});l.displayName="CardTitle";let c=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,o.jsx)("p",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",a),...t})});c.displayName="CardDescription";let u=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,o.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",a),...t})});u.displayName="CardContent";let d=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,o.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",a),...t})});d.displayName="CardFooter"},8030:(e,r,a)=>{a.d(r,{A:()=>d,AuthProvider:()=>u});var o=a(5155),t=a(3004),s=a(5695),i=a(2115),n=a(6104),l=a(9623);let c=(0,i.createContext)({user:null,userProfile:null,loading:!0,error:null,login:async()=>{},signup:async()=>{},loginWithGoogle:async()=>{},logout:()=>{},updateUserProfileState:()=>{},clearError:()=>{}}),u=e=>{let{children:r}=e,[a,u]=(0,i.useState)(null),[d,f]=(0,i.useState)(null),[m,g]=(0,i.useState)(!0),[p,_]=(0,i.useState)(null),x=(0,s.useRouter)();(0,i.useEffect)(()=>{if(!n.G){let e=localStorage.getItem("lexai_mock_user"),r=localStorage.getItem("lexai_mock_userProfile");e&&u(JSON.parse(e)),r&&f(JSON.parse(r)),g(!1);return}let e=(0,t.xI)(n.x),r=(0,t.hg)(e,async e=>{g(!0);try{if(e){u(e);let r=await (0,l.VM)(e.uid);r.success&&r.data?f(r.data):(console.error("Erro ao carregar perfil do usu\xe1rio:",r.error),f(null))}else u(null),f(null)}catch(e){console.error("Erro n\xe3o tratado no onAuthStateChanged:",e),u(null),f(null)}finally{g(!1)}});return()=>r()},[]);let v=(e,r)=>({uid:"test-user-123",email:e||"test@lexai.com",displayName:r||"Advogado Teste"}),y=e=>({uid:"new-user-".concat(Date.now()),email:e||"novo@lexai.com",displayName:"Novo Usu\xe1rio"}),b=async(e,r)=>{try{if(g(!0),_(null),n.G){let a=(0,t.xI)(n.x);await (0,t.x9)(a,e,r),x.push("/")}else if("test@lexai.com"===e&&"test123"===r){let e=v();u(e);let r={cargo:"Advogado(a)",areas_atuacao:["Direito Civil"],primeiro_acesso:!1,initial_setup_complete:!0,data_criacao:new Date,workspaces:[{name:"Workspace Pessoal"}]};f(r),localStorage.setItem("lexai_mock_user",JSON.stringify(e)),localStorage.setItem("lexai_mock_userProfile",JSON.stringify(r)),x.push("/")}else throw Error("Email ou senha incorretos")}catch(e){console.error("Erro no login:",e),_(e.message||"Erro ao fazer login")}finally{g(!1)}},h=async(e,r,a)=>{try{if(g(!0),_(null),n.G){let a=(0,t.xI)(n.x);await (0,t.eJ)(a,e,r),x.push("/onboarding")}else{let r=y(e);u(r);let o={cargo:(null==a?void 0:a.cargo)||"",areas_atuacao:(null==a?void 0:a.areas_atuacao)||[],primeiro_acesso:!0,initial_setup_complete:!1,data_criacao:new Date,workspaces:[]};f(o),localStorage.setItem("lexai_mock_user",JSON.stringify(r)),localStorage.setItem("lexai_mock_userProfile",JSON.stringify(o)),x.push("/onboarding")}}catch(e){console.error("Erro no cadastro:",e),_(e.message||"Erro ao criar conta")}finally{g(!1)}},w=async()=>{try{if(g(!0),_(null),n.G){let e=(0,t.xI)(n.x),r=new t.HF;await (0,t.df)(e,r),x.push("/")}else{let e=v("google@lexai.com","Usu\xe1rio Google");u(e);let r={cargo:"",areas_atuacao:[],primeiro_acesso:!0,initial_setup_complete:!1,data_criacao:new Date,workspaces:[]};f(r),localStorage.setItem("lexai_mock_user",JSON.stringify(e)),localStorage.setItem("lexai_mock_userProfile",JSON.stringify(r)),x.push("/onboarding")}}catch(e){console.error("Erro no login com Google:",e),_(e.message||"Erro ao fazer login com Google")}finally{g(!1)}};return(0,o.jsx)(c.Provider,{value:{user:a,userProfile:d,loading:m,error:p,login:b,signup:h,loginWithGoogle:w,logout:()=>{if(n.G){let e=(0,t.xI)(n.x);(0,t.CI)(e)}else u(null),f(null),localStorage.removeItem("lexai_mock_user"),localStorage.removeItem("lexai_mock_userProfile"),x.push("/login")},updateUserProfileState:e=>{f(r=>{let a=r?{...r,...e}:null;return!n.G&&a&&localStorage.setItem("lexai_mock_userProfile",JSON.stringify(a)),a})},clearError:()=>{_(null)}},children:r})},d=()=>{let e=(0,i.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9434:(e,r,a)=>{a.d(r,{cn:()=>s});var o=a(2596),t=a(9688);function s(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return(0,t.QP)((0,o.$)(r))}},9623:(e,r,a)=>{a.d(r,{VM:()=>n,eg:()=>c});var o=a(5317),t=a(6104);let s=t.G?(0,o.aU)(t.x):null;function i(e,r){return e instanceof Error?"code"in e?{code:e.code,message:function(e){switch(e){case"permission-denied":return"Voc\xea n\xe3o tem permiss\xe3o para acessar este recurso.";case"not-found":return"Dados n\xe3o encontrados.";case"unavailable":return"Servi\xe7o temporariamente indispon\xedvel. Tente novamente.";case"cancelled":return"Opera\xe7\xe3o cancelada.";case"deadline-exceeded":return"Tempo limite excedido. Verifique sua conex\xe3o.";case"unauthenticated":return"Voc\xea precisa estar logado para realizar esta a\xe7\xe3o.";default:return"Ocorreu um erro inesperado. Tente novamente."}}(e.code),details:e.message}:{code:"unknown",message:"Erro durante ".concat(r,": ").concat(e.message),details:e.stack}:{code:"unknown",message:"Erro desconhecido durante ".concat(r),details:String(e)}}async function n(e){try{if(!t.G||!s)return{data:{cargo:"",areas_atuacao:[],primeiro_acesso:!0,initial_setup_complete:!1,data_criacao:new Date,workspaces:[]},error:null,success:!0};if(!e||""===e.trim())return{data:null,error:{code:"invalid-argument",message:"ID do usu\xe1rio \xe9 obrigat\xf3rio."},success:!1};let a=(0,o.H9)(s,"usuarios",e),i=await (0,o.x7)(a);if(i.exists()){var r;let e=i.data();return{data:{...e,workspaces:e.workspaces||[],initial_setup_complete:null!=(r=e.initial_setup_complete)&&r},error:null,success:!0}}{let r={cargo:"",areas_atuacao:[],primeiro_acesso:!0,initial_setup_complete:!1,data_criacao:new Date,workspaces:[]},a=await l(e,{...r,data_criacao:new Date});if(!a.success)return{data:null,error:a.error,success:!1};return{data:a.data,error:null,success:!0}}}catch(e){return console.error("Erro em getUserProfile:",e),{data:null,error:i(e,"buscar perfil do usu\xe1rio"),success:!1}}}async function l(e,r){try{if(!e||""===e.trim())return{data:null,error:{code:"invalid-argument",message:"ID do usu\xe1rio \xe9 obrigat\xf3rio."},success:!1};if(!r)return{data:null,error:{code:"invalid-argument",message:"Dados do perfil s\xe3o obrigat\xf3rios."},success:!1};if(!t.G||!s)return console.log("[MOCK] Criando perfil para usu\xe1rio ".concat(e),r),{data:{...r,initial_setup_complete:r.initial_setup_complete||!1,data_criacao:new Date,workspaces:r.workspaces||[]},error:null,success:!0};let a=(0,o.H9)(s,"usuarios",e),i={...r,initial_setup_complete:r.initial_setup_complete||!1,data_criacao:(0,o.O5)(),workspaces:r.workspaces||[]};return await (0,o.BN)(a,i),{data:{...i,data_criacao:new Date},error:null,success:!0}}catch(e){return console.error("Erro em createUserProfile:",e),{data:null,error:i(e,"criar perfil do usu\xe1rio"),success:!1}}}async function c(e,r){try{if(!e||""===e.trim())return{data:null,error:{code:"invalid-argument",message:"ID do usu\xe1rio \xe9 obrigat\xf3rio."},success:!1};if(!r||0===Object.keys(r).length)return{data:null,error:{code:"invalid-argument",message:"Dados para atualiza\xe7\xe3o s\xe3o obrigat\xf3rios."},success:!1};if(!t.G||!s)return console.log("[MOCK] Atualizando perfil para usu\xe1rio ".concat(e),r),{data:r,error:null,success:!0};let a=(0,o.H9)(s,"usuarios",e),i={...r};return delete i.data_criacao,await (0,o.BN)(a,i,{merge:!0}),{data:i,error:null,success:!0}}catch(e){return console.error("Erro em updateUserProfile:",e),{data:null,error:i(e,"atualizar perfil do usu\xe1rio"),success:!1}}}}}]);