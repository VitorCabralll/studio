"use strict";(()=>{var e={};e.id=435,e.ids=[435],e.modules={3295:e=>{e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},23330:(e,t,r)=>{r.r(t),r.d(t,{patchFetch:()=>x,routeModule:()=>p,serverHooks:()=>g,workAsyncStorage:()=>m,workUnitAsyncStorage:()=>l});var s={};r.r(s),r.d(s,{GET:()=>d,POST:()=>u});var n=r(96559),o=r(48088),a=r(37719),i=r(32190),c=r(39133);async function u(e){try{let t=await e.json();if(!t.instructions?.trim())return i.NextResponse.json({success:!1,error:{message:"Instru\xe7\xf5es s\xe3o obrigat\xf3rias",code:"MISSING_INSTRUCTIONS"}},{status:400});let r={taskType:"document_generation",documentType:function(e){switch(e){case"outline":default:return"brief";case"full":return"petition"}}(t.mode),legalArea:function(e){switch(e){case"civil":case"geral":default:return"civil";case"stj":return"constitutional"}}(t.agent),instructions:t.instructions,context:(t.attachments||[]).map((e,t)=>({type:"file_content",content:e,source:`attachment_${t+1}`}))};console.log("[API] Iniciando gera\xe7\xe3o de documento:",{agent:t.agent,mode:t.mode,hasAttachments:(t.attachments?.length||0)>0,instructionsLength:t.instructions.length});let s=await (0,c.xb)(r);if(s.success&&s.result)return i.NextResponse.json({success:!0,document:s.result.content,metadata:{processingTime:s.metadata.processingTime,cost:s.metadata.totalCost,confidence:s.metadata.confidence,llmUsed:s.metadata.llmUsed.map(e=>`${e.provider}:${e.model}`)}});return i.NextResponse.json({success:!1,error:{message:s.error?.message||"Erro desconhecido no processamento",code:s.error?.code||"ORCHESTRATOR_ERROR"}},{status:500})}catch(e){return console.error("[API] Erro na gera\xe7\xe3o de documento:",e),i.NextResponse.json({success:!1,error:{message:"Erro interno do servidor",code:"INTERNAL_ERROR"}},{status:500})}}async function d(){return i.NextResponse.json({status:"ok",service:"document-generation-api",timestamp:new Date().toISOString()})}let p=new n.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/generate/route",pathname:"/api/generate",filename:"route",bundlePath:"app/api/generate/route"},resolvedPagePath:"/home/user/studio/src/app/api/generate/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:m,workUnitAsyncStorage:l,serverHooks:g}=p;function x(){return(0,a.patchFetch)({workAsyncStorage:m,workUnitAsyncStorage:l})}},29294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,580,993],()=>r(23330));module.exports=s})();